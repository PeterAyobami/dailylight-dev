@inject TokenAuthenticationStateProvider TokenAuthenticationStateProvider 
@inject NavigationManager NavigationManager

<AuthorizeView>
    <Authorized>
        <div class="o-page__sidebar js-page-sidebar">
            <div class="c-sidebar">
                <a class="c-sidebar__brand" href="/dashboard">
                    <img class="c-sidebar__brand-img" src="Assets/Images/logo.png">
                </a>

                <h4 class="c-sidebar__title">Dashboards</h4>
                <ul class="c-sidebar__list">

                    <li class="c-sidebar__item">
                        <a class="c-sidebar__link is-active" href="/dashboard">
                            <i class="fa fa-home u-mr-xsmall"></i>Overview
                        </a>
                    </li>
                </ul>

                <h4 class="c-sidebar__title">Enterprise</h4>
                <ul class="c-sidebar__list">
                    <li class="c-sidebar__item">
                        <a class="c-sidebar__link" href="/editions">
                            <i class="ti-list u-mr-xsmall"></i>Editions
                        </a>
                    </li>
                    <li class="c-sidebar__item">
                        <a class="c-sidebar__link" href="/devotions">
                            <i class="ti-list u-mr-xsmall"></i>Devotions
                        </a>
                    </li>
                    <li class="c-sidebar__item">
                        <a class="c-sidebar__link" href="/devotion-entry">
                            <i class="fa fa-edit u-mr-xsmall"></i>Devotion Entry
                        </a>
                    </li>
                </ul>

                <h4 class="c-sidebar__title">Account</h4>
                <ul class="c-sidebar__list">
                    <!--<li class="c-sidebar__item">
                    <a class="c-sidebar__link" href="/manage-users">
                        <i class="fa fa-user-plus u-mr-xsmall"></i>Manage Users
                    </a>
                </li>-->
                    <!--<li class="c-sidebar__item">
                    <a class="c-sidebar__link" href="/users-account">
                        <i class="fa fa-user-circle u-mr-xsmall"></i>My Account
                    </a>
                </li>-->

                    <li class="c-sidebar__item">
                        <a class="c-sidebar__link" href="#" @onclick="@(async () => await LogOutAsync())">
                            <i class="fa fa-sign-out u-mr-xsmall"></i>Log Out
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </Authorized>
</AuthorizeView>

@code {
    bool collapseNavMenu = true;

    string NavMenuCssClass => collapseNavMenu ? "collapse" : null;

    void ToggleNavMenu()
    {
        collapseNavMenu = !collapseNavMenu;
    }

    /// <summary>
    /// Logs the user out of the application
    /// </summary>
    private async Task LogOutAsync()
    {
        // Remove the client's token
        await TokenAuthenticationStateProvider.RemoveTokenAsync();

        // Navigate to login page
        NavigationManager.NavigateTo("/");
    }
}
